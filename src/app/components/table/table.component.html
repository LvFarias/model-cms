<table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
    <ng-container [matColumnDef]="column.field" *ngFor="let column of displayedColumns"></ng-container>

    <ng-container matColumnDef="position">
        <th mat-header-cell *matHeaderCellDef> No. </th>
        <td mat-cell *matCellDef="let element"> {{element.position}} </td>
    </ng-container>

    <!-- Name Column -->
    <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> Name </th>
        <td mat-cell *matCellDef="let element"> {{element.name}} </td>
    </ng-container>

    <!-- Weight Column -->
    <ng-container matColumnDef="weight">
        <th mat-header-cell *matHeaderCellDef> Weight </th>
        <td mat-cell *matCellDef="let element"> {{element.weight}} </td>
    </ng-container>

    <!-- Symbol Column -->
    <ng-container matColumnDef="symbol">
        <th mat-header-cell *matHeaderCellDef> Symbol </th>
        <td mat-cell *matCellDef="let element"> {{element.symbol}} </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>


<div class="custom-table-container mat-elevation-z8">
    <div class="custom-table-table-container" fxLayout="column">
        <div fxLayout="row" fxFlex="100" fxLayoutAlign="start center">
            <!-- <mat-form-field *ngIf="showSearch" fxFlex="30">
          <input matInput type="search" placeholder="Buscar" (change)="changeSearch($event.target.value)">
        </mat-form-field> -->
            <span *ngIf="showFilters" fxFlex="15">Filtros:</span>
            <app-table-filter *ngIf="showFilters" [fxFlex]="showSearch ? '50' : '80'" [fields]="displayedColumns"
                (results)="emitChangeFilters($event)">
            </app-table-filter>
        </div>
        <table mat-table [dataSource]="list" class="custom-table-table" style="width: 100%">
            <ng-container [matColumnDef]="column.field" *ngFor="let column of displayedColumns">
                <th mat-header-cell *matHeaderCellDef>{{ column.name }}</th>
                <td mat-cell *matCellDef="let element; let index = index">
                    <span *ngIf="column.type === 'button' || column.type === 'button-outline'" class="buttons">
                        <button mat-raised-button [color]="
                  !column.color
                    ? 'primary'
                    : column.color(getValue(element, column), element)
                " [class.rbac-disabled]="column.disable" (click)="column.click(element, index)">
                            <mat-icon *ngIf="column.icon">{{ column.icon }}</mat-icon>
                            {{
                  !column.transform
                    ? column.text || ""
                    : column.transform(getValue(element, column), element)
                }}
                        </button>
                    </span>
                    <span *ngIf="!column.type || column.type === 'text'" [class.rbac-disabled]="column.disable"
                        [class.enable-click]="!!column.click" (click)="
                !column.click
                  ? emitButtonClick(false)
                  : column.click(element, index)
              ">{{
                !column.transform
                  ? getValue(element, column)
                  : column.transform(getValue(element, column))
              }}</span>
                    <span
                        *ngIf="column.type === 'icon' && (!column.hideIfNoData || (column.hideIfNoData && getValue(element, column)))"
                        [class.rbac-disabled]="column.disable">
                        <mat-icon [matTooltip]="getValue(element, column)" [class.enable-click]="!!column.click"
                            [style.color]="
                  !column.color ? '' : column.color(getValue(element, column))
                " (click)="
                  !column.click
                    ? emitButtonClick(false)
                    : column.click(element, index)
                ">
                            {{
                  !column.transform
                    ? getValue(element, column)
                    : column.transform(getValue(element, column))
                }}
                        </mat-icon>
                    </span>
                    <span *ngIf="column.type === 'html'" [innerHTML]="column.html(getValue(element, column))"></span>
                    <span *ngIf="column.type === 'file'" class="files">
                        <div *ngIf="element.loading" class="loading">
                            <mat-spinner diameter="25"></mat-spinner>
                        </div>
                        <div *ngIf="!element.loading">
                            <mat-icon matSuffix *ngIf="element.paths.length > 0" (click)="deleteFile(index, column)"
                                color="accent" matTooltip="Excluir Documento">delete</mat-icon>
                            <div class="uploadIcon">
                                <label for="{{ 'file_' + index }}">
                                    <mat-icon matSuffix color="accent" matTooltip="Enviar Documento">cloud_upload
                                    </mat-icon>
                                </label>
                                <input type="file" hidden id="{{ 'file_' + index }}"
                                    [accept]="element.allowedExtensions.join(',')" [multiple]="element.multiple"
                                    (change)="changeFile(index, column, $event.target.files)" />
                            </div>
                            <mat-icon matSuffix color="accent" matTooltip="Baixar Documento"
                                *ngIf="!!element.downloadLink" (click)="downloadFile(element.downloadLink)">
                                cloud_download</mat-icon>
                        </div>
                    </span>
                    <span *ngIf="column.type === 'date'">{{
              getValue(element, column) | date
            }}</span>
                    <span *ngIf="column.type === 'time'">{{
              getValue(element, column) | date: "short"
            }}</span>
                    <span *ngIf="column.type === 'currency'">{{
              getValue(element, column) | currency: "BRL":"symbol"
            }}</span>
                    <span *ngIf="column.type === 'boolean'">{{
              getValue(element, column) ? "SIM" : ""
            }}</span>
                    <span *ngIf="column.type === 'toogle'" [class.rbac-disabled]="column.disable">
                        <mat-slide-toggle [checked]="getValue(element, column)"
                            (change)="column.toogle(element, $event.checked)">
                        </mat-slide-toggle>
                    </span>
                    <span *ngIf="column.type === 'select'" [class.rbac-disabled]="column.disable">
                        <mat-select [value]="getValue(element, column)" [placeholder]="column.name"
                            (selectionChange)="column.change(element, $event.value)">
                            <mat-option *ngFor="let option of column.options" [value]="option.value">{{ option.alias }}
                            </mat-option>
                        </mat-select>
                    </span>
                </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="columns"></tr>
            <tr mat-row *matRowDef="let row; columns: columns"></tr>
        </table>
        <h2 *ngIf="!loading && list.length == 0">Sem resultados</h2>
    </div>
    <mat-paginator *ngIf="showPagination" [length]="listCount" [pageSize]="pageSize" (page)="emitChangePage($event)">
    </mat-paginator>
</div>